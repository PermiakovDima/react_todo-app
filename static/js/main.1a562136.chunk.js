(this["webpackJsonpreact_todo-app"]=this["webpackJsonpreact_todo-app"]||[]).push([[0],{13:function(e,t,n){},21:function(e,t,n){},23:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){"use strict";n.r(t);var c=n(14),a=n.n(c),r=n(8),o=n(6),s=n(3),l=n(5),i=n.n(l),u=n(0),d="https://mate.academy/students-api/users",j=function(e,t,n){return fetch("".concat(d),{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({name:e,username:t,email:n})})},b=(n(21),n(1)),h=function(e){var t=e.message;return Object(b.jsx)("div",{className:"Notification",children:t})},m=(n(13),function(e){var t=e.backToAuth,n=e.handlerLogin,c=e.filterEmailUsers,a=Object(u.useState)(""),r=Object(s.a)(a,2),l=r[0],d=r[1],m=Object(u.useState)(""),f=Object(s.a)(m,2),p=f[0],O=f[1],x=Object(u.useState)(""),v=Object(s.a)(x,2),g=v[0],N=v[1],_=Object(u.useState)(!1),y=Object(s.a)(_,2),A=y[0],E=y[1],k=Object(u.useState)(""),S=Object(s.a)(k,2),w=S[0],C=S[1];Object(u.useMemo)((function(){E(!1)}),[l,p,g]);return Object(b.jsx)("div",{children:Object(b.jsxs)("form",{className:"Auth__form",children:[Object(b.jsxs)("label",{htmlFor:"log-name",className:"Auth__label",children:[Object(b.jsx)("span",{children:"Name"}),Object(b.jsx)("input",{type:"text",id:"log-name",value:g,className:"Auth__input",placeholder:"Minimum 3 letters",onChange:function(e){return N(e.target.value)}})]}),Object(b.jsxs)("label",{htmlFor:"log-email",className:"Auth__label",children:[Object(b.jsx)("span",{children:"Email"}),Object(b.jsx)("input",{type:"text",id:"log-email",value:l,className:"Auth__input",placeholder:"Minimum 6 letters",onChange:function(e){return d(e.target.value)}})]}),Object(b.jsxs)("label",{htmlFor:"log-password",className:"Auth__label",children:[Object(b.jsx)("span",{children:"Password"}),Object(b.jsx)("input",{type:"password",id:"log-password",value:p,className:"Auth__input",placeholder:"Minimum 8 letters",onChange:function(e){return O(e.target.value)}})]}),Object(b.jsx)("button",{type:"button",className:"Auth__btn",onClick:function(){return function(){var e=c.some((function(e){return e===l}));g.length>2&&l.length>5&&p.length>7&&!e?Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(g,p,l);case 2:n(l,p),t();case 4:case"end":return e.stop()}}),e)})))():E(!0),g.length<3?C("Enter name min 3 letters"):l.length<5?C("Enter Email min 6 letters"):p.length<8?C("Enter Password min 8 letters"):e&&C("This email is used")}()},children:"CREATE"}),Object(b.jsx)("button",{type:"button",className:"Auth__btn",onClick:function(){return t()},children:"SING IN"}),A&&Object(b.jsx)(h,{message:w})]})})}),f=function(e){var t=e.handlerLogin,n=e.waitingNewUser,c=e.foundUser,a=e.filterEmailUsers,r=Object(u.useState)(""),o=Object(s.a)(r,2),l=o[0],i=o[1],d=Object(u.useState)(""),j=Object(s.a)(d,2),f=j[0],p=j[1],O=Object(u.useState)(!1),x=Object(s.a)(O,2),v=x[0],g=x[1],N=Object(u.useState)(!1),_=Object(s.a)(N,2),y=_[0],A=_[1];Object(u.useMemo)((function(){A(!1)}),[l,f]);return Object(u.useEffect)((function(){p(""),i("")}),[c]),Object(b.jsx)("div",{className:"Auth",children:v?Object(b.jsx)(m,{backToAuth:function(){g(!v),p(""),i(""),A(!1),n()},handlerLogin:t,filterEmailUsers:a}):Object(b.jsxs)("form",{className:"Auth__form",children:[Object(b.jsxs)("label",{htmlFor:"log-email",className:"Auth__label",children:[Object(b.jsx)("span",{children:"Email"}),Object(b.jsx)("input",{type:"text",id:"log-email",value:l,className:"Auth__input",min:3,placeholder:"Minimum 3 letters",onChange:function(e){return i(e.target.value)}})]}),Object(b.jsxs)("label",{htmlFor:"log-password",className:"Auth__label",children:[Object(b.jsx)("span",{children:"Password"}),Object(b.jsx)("input",{type:"password",id:"log-password",className:"Auth__input",value:f,placeholder:"Minimum 8 letters",onChange:function(e){return p(e.target.value)}})]}),Object(b.jsx)("button",{type:"button",className:"Auth__btn",onClick:function(){l.length>3&&f.length>4?(t(l,f),A(!0)):A(!0)},children:"LOGIN"}),Object(b.jsx)("button",{type:"button",className:"Auth__btn",onClick:function(){return g(!v)},children:"REGISTRATION"}),y&&!c&&Object(b.jsx)(h,{message:"Incorrect login or password"})]})})},p=n(12),O=n(11),x=n(2),v="https://mate.academy/students-api/todos",g=function(e,t,n){return fetch("".concat(v,"/").concat(e),{method:"PATCH",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({completed:t,title:n})})},N=function(e){return fetch("".concat(v,"/").concat(e),{method:"DELETE"})},_=n(15),y=n.n(_),A=function(e){var t=e.title,n=e.completed,c=e.todoId,a=e.handlerChecked,r=e.handlerDeleteTodo,o=e.handlerEditTodo,l=Object(u.useState)(!1),i=Object(s.a)(l,2),d=i[0],j=i[1],h=Object(u.useState)(""),m=Object(s.a)(h,2),f=m[0],p=m[1];Object(u.useEffect)((function(){p(t)}),[]);return Object(b.jsxs)("li",{className:y()({completed:n,editing:d}),onDoubleClick:function(){return j(!d)},children:[Object(b.jsxs)("div",{className:"view",children:[Object(b.jsx)("input",{type:"checkbox",className:"toggle",checked:n,onChange:function(){return a(c)}}),Object(b.jsx)("label",{children:t}),Object(b.jsx)("button",{type:"button",className:"destroy",onClick:function(){return r(c)},children:" "})]}),Object(b.jsx)("input",{type:"text",className:"edit",value:f,onChange:function(e){return p(e.target.value)},onKeyDown:function(e){"Enter"===e.key?(o(f,c),j(!1)):"Escape"===e.key&&j(!1)}})]})},E=function(e){var t=e.visibleTodos,n=e.handlerChecked,c=e.handlerDeleteTodo,a=e.handlerAllChecked,r=e.handlerEditTodo,o=t.every((function(e){return!0===e.completed}));return Object(b.jsxs)("section",{className:"main",children:[Object(b.jsx)("input",{type:"checkbox",id:"toggle-all",className:"toggle-all",checked:o,onClick:a}),Object(b.jsx)("label",{htmlFor:"toggle-all",children:Object(b.jsx)("span",{children:"Mark all as complete"})}),Object(b.jsx)("ul",{className:"todo-list",children:t.map((function(e){return Object(b.jsx)(A,{todoId:e.id,title:e.title,completed:e.completed,handlerChecked:n,handlerDeleteTodo:c,handlerEditTodo:r},e.id)}))})]})},k=(n(23),function(e){var t=e.todos,n=e.user,c=e.removeUser,a=e.handlerSingOut,l=Object(u.useState)(t),d=Object(s.a)(l,2),j=d[0],h=d[1],m=Object(u.useState)(""),f=Object(s.a)(m,2),_=f[0],y=f[1],A=Object(u.useState)(!0),k=Object(s.a)(A,2),S=k[0],w=k[1];Object(u.useMemo)((function(){Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=5;break}return e.next=3,c=n.id,fetch("".concat(v,"?userId=").concat(c)).then((function(e){return e.json()}));case 3:t=e.sent,h(t);case 5:case"end":return e.stop()}var c}),e)})))()}),[S]),Object(u.useEffect)((function(){h(t)}),[t]);var C=Object(x.c)().pathname,T=j;Object(u.useMemo)((function(){T="/"!==C?j.filter((function(e){return"/completed"===C?e.completed:!e.completed})):j}),[C,_,j]);var I=function(e){return e.isActive?"selected":""};return Object(b.jsxs)("div",{className:"TodoApp",children:[Object(b.jsxs)("div",{className:"TodoApp__header-btns",children:[Object(b.jsx)("button",{type:"button",onClick:c,className:"TodoApp__bnt TodoApp__bnt--delete-user",children:"Delete Account"}),Object(b.jsx)("button",{type:"button",onClick:a,className:"TodoApp__bnt TodoApp__bnt--delete-user",children:"Sign out"})]}),Object(b.jsxs)("section",{className:"todoapp",children:[Object(b.jsxs)("header",{className:"header",children:[Object(b.jsxs)("h1",{children:["todos -"," ",n?n.name:Object(b.jsx)("img",{className:"TodoApp__loader-spiner",src:"../../icons/loader.svg",alt:""})]}),Object(b.jsx)("form",{onSubmit:function(){_&&n&&Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t=_,c=n.id,a=!1,fetch("".concat(v),{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({title:t,userId:c,completed:a})});case 2:y(""),w(!S);case 4:case"end":return e.stop()}var t,c,a}),e)})))()},children:Object(b.jsx)("input",{type:"text",className:"new-todo",placeholder:"What needs to be done?",value:_,onChange:function(e){y(e.target.value)}})})]}),Object(b.jsx)(E,{visibleTodos:T,handlerChecked:function(e){var t=j.find((function(t){return t.id===e}));t&&(g(e,!t.completed,t.title),t.completed=!t.completed),h((function(e){return Object(O.a)(e)}))},handlerDeleteTodo:function(e){var t=j.findIndex((function(t){return t.id===e}));t>=0&&(N(e),j.splice(t,1),h((function(e){return Object(O.a)(e)})))},handlerAllChecked:function(){var e=j.every((function(e){return e.completed})),t=j.map((function(t){return Object(p.a)(Object(p.a)({},t),{},{completed:!e||!t.completed})}));j.forEach((function(t){return g(t.id,!e||!t.completed,t.title)})),h(t)},handlerEditTodo:function(e,t){var n=j.map((function(n){return n.id===t?{title:e,userId:n.userId,completed:n.completed,id:n.id}:n}));j.forEach((function(n){n.id===t&&g(t,n.completed,e)})),h(n)}}),j.length>0&&Object(b.jsxs)("footer",{className:"footer",children:[Object(b.jsxs)("span",{className:"todo-count",children:[j.filter((function(e){return!1===e.completed})).length," ","items left"]}),Object(b.jsxs)("ul",{className:"filters",children:[Object(b.jsx)("li",{children:Object(b.jsx)(r.b,{to:"/",className:I,end:!0,children:"All"})}),Object(b.jsx)("li",{children:Object(b.jsx)(r.b,{to:"active",className:I,end:!0,children:"Active"})}),Object(b.jsx)("li",{children:Object(b.jsx)(r.b,{to:"completed",className:I,end:!0,children:"Completed"})})]}),Object(b.jsx)("button",{type:"button",className:"clear-completed",onClick:function(){var e=j.filter((function(e){return!1===e.completed}));j.forEach((function(e){e.completed&&N(e.id)})),h(e)},children:"Clear completed"})]})]})]})}),S=function(){var e=Object(u.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],a=Object(u.useState)([]),r=Object(s.a)(a,2),l=r[0],j=r[1],h=Object(u.useState)(),m=Object(s.a)(h,2),p=m[0],O=m[1],x=Object(u.useState)([]),g=Object(s.a)(x,2),N=g[0],_=g[1],y=Object(u.useState)(!1),A=Object(s.a)(y,2),E=A[0],S=A[1],w=localStorage.getItem("userId"),C=function(){var e=Object(o.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(v)).then((function(e){return e.json()}));case 3:return t=e.sent,c(t),e.next=7,fetch("".concat(d)).then((function(e){return e.json()}));case 7:n=e.sent,j(n),e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(0),new Error("todos");case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),T=l.map((function(e){return e.email}));Object(u.useEffect)((function(){C()}),[]);Object(u.useMemo)((function(){p&&localStorage.setItem("userId",p?p.username:"");var e=n.filter((function(e){return e.userId===(null===p||void 0===p?void 0:p.id)}));_(e)}),[p]),Object(u.useEffect)((function(){if(w){var e=l.find((function(e){return e.username===w}));if(O(e),e){var t=n.filter((function(t){return t.userId===(null===e||void 0===e?void 0:e.id)}));_(t)}}}),[l]);return Object(b.jsx)(b.Fragment,{children:w?Object(b.jsx)(k,{todos:N,user:p,removeUser:function(){if(p){t=p.id,fetch("".concat(d,"/").concat(t),{method:"DELETE"}),localStorage.removeItem("userId");var e=l.filter((function(e){return e.id!==p.id}));j(e),O(void 0)}var t},handlerSingOut:function(){localStorage.removeItem("userId"),O(void 0)}}):Object(b.jsx)(f,{foundUser:p,handlerLogin:function(e,t){Object(o.a)(i.a.mark((function n(){var c;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,C();case 2:(c=l.find((function(n){return n.email===e&&n.username===t})))&&O(c);case 4:case"end":return n.stop()}}),n)})))()},waitingNewUser:function(){S(!E)},filterEmailUsers:T})})};n(24),n(25),n(26);a.a.render(Object(b.jsx)(r.a,{children:Object(b.jsx)(S,{})}),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.1a562136.chunk.js.map