(this["webpackJsonpreact_todo-app"]=this["webpackJsonpreact_todo-app"]||[]).push([[0],{13:function(e,t,n){},22:function(e,t,n){},23:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){"use strict";n.r(t);var c=n(14),a=n.n(c),o=n(7),r=n(8),s=n(3),l=n(5),i=n.n(l),u=n(0),d="https://mate.academy/students-api/users",j=(n(13),n(1)),b=function(e){var t=e.backToAuth,n=Object(u.useState)(""),c=Object(s.a)(n,2),a=c[0],o=c[1],r=Object(u.useState)(""),l=Object(s.a)(r,2),i=l[0],b=l[1],h=Object(u.useState)(""),m=Object(s.a)(h,2),p=m[0],f=m[1],O=function(){p.length>2&&a.length>5&&i.length>7&&(!function(e,t,n){fetch("".concat(d),{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({name:e,username:t,email:n})})}(p,i,a),f(""),b(""),o(""),localStorage.setItem("test",i),t())};return Object(j.jsx)("div",{children:Object(j.jsxs)("form",{className:"Auth__form",children:[Object(j.jsxs)("label",{htmlFor:"log-name",className:"Auth__label",children:[Object(j.jsx)("span",{children:"Name"}),Object(j.jsx)("input",{type:"text",id:"log-name",value:p,className:"Auth__input",placeholder:"Minimum 3 letters",onChange:function(e){return f(e.target.value)}})]}),Object(j.jsxs)("label",{htmlFor:"log-email",className:"Auth__label",children:[Object(j.jsx)("span",{children:"Email"}),Object(j.jsx)("input",{type:"text",id:"log-email",value:a,className:"Auth__input",placeholder:"Minimum 6 letters",onChange:function(e){return o(e.target.value)}})]}),Object(j.jsxs)("label",{htmlFor:"log-password",className:"Auth__label",children:[Object(j.jsx)("span",{children:"Password"}),Object(j.jsx)("input",{type:"password",id:"log-password",value:i,className:"Auth__input",placeholder:"Minimum 8 letters",onChange:function(e){return b(e.target.value)}})]}),Object(j.jsx)("button",{type:"button",className:"Auth__btn",onClick:function(){return O()},children:"CREATE"}),Object(j.jsx)("button",{type:"button",className:"Auth__btn",onClick:function(){return t()},children:"SING IN"})]})})},h=function(e){var t=e.handlerLogin,n=e.waitingNewUser,c=Object(u.useState)(""),a=Object(s.a)(c,2),o=a[0],r=a[1],l=Object(u.useState)(""),i=Object(s.a)(l,2),d=i[0],h=i[1],m=Object(u.useState)(!1),p=Object(s.a)(m,2),f=p[0],O=p[1];return Object(j.jsx)("div",{className:"Auth",children:f?Object(j.jsx)(b,{backToAuth:function(){O(!f),n()}}):Object(j.jsxs)("form",{className:"Auth__form",children:[Object(j.jsxs)("label",{htmlFor:"log-email",className:"Auth__label",children:[Object(j.jsx)("span",{children:"Email"}),Object(j.jsx)("input",{type:"text",id:"log-email",value:o,className:"Auth__input",placeholder:"Minimum 3 letters",onChange:function(e){return r(e.target.value)}})]}),Object(j.jsxs)("label",{htmlFor:"log-password",className:"Auth__label",children:[Object(j.jsx)("span",{children:"Password"}),Object(j.jsx)("input",{type:"password",id:"log-password",className:"Auth__input",value:d,placeholder:"Minimum 8 letters",onChange:function(e){return h(e.target.value)}})]}),Object(j.jsx)("button",{type:"button",className:"Auth__btn",onClick:function(){o.length>3&&d.length>4?(t(o,d),h(""),r("")):console.log("error")},children:"LOGIN"}),Object(j.jsx)("button",{type:"button",className:"Auth__btn",onClick:function(){return O(!f)},children:"REGISTRATION"})]})})},m=n(12),p=n(11),f=n(2),O="https://mate.academy/students-api/todos",x=function(e){return fetch("".concat(O,"?userId=").concat(e)).then((function(e){return e.json()}))},g=function(e,t,n){return fetch("".concat(O,"/").concat(e),{method:"PATCH",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({completed:t,title:n})})},v=function(e){return fetch("".concat(O,"/").concat(e),{method:"DELETE"})},N=n(15),_=n.n(N),y=function(e){var t=e.title,n=e.completed,c=e.todoId,a=e.handlerChecked,o=e.handlerDeleteTodo,r=e.handlerEditTodo,l=Object(u.useState)(!1),i=Object(s.a)(l,2),d=i[0],b=i[1],h=Object(u.useState)(""),m=Object(s.a)(h,2),p=m[0],f=m[1];Object(u.useEffect)((function(){f(t)}),[]);return Object(j.jsxs)("li",{className:_()({completed:n,editing:d}),onDoubleClick:function(){return b(!d)},children:[Object(j.jsxs)("div",{className:"view",children:[Object(j.jsx)("input",{type:"checkbox",className:"toggle",checked:n,onChange:function(){return a(c)}}),Object(j.jsx)("label",{children:t}),Object(j.jsx)("button",{type:"button",className:"destroy",onClick:function(){return o(c)},children:" "})]}),Object(j.jsx)("input",{type:"text",className:"edit",value:p,onChange:function(e){return f(e.target.value)},onKeyDown:function(e){"Enter"===e.key?(r(p,c),b(!1)):"Escape"===e.key&&b(!1)}})]})},A=function(e){var t=e.visibleTodos,n=e.handlerChecked,c=e.handlerDeleteTodo,a=e.handlerAllChecked,o=e.handlerEditTodo,r=t.every((function(e){return!0===e.completed}));return Object(j.jsxs)("section",{className:"main",children:[Object(j.jsx)("input",{type:"checkbox",id:"toggle-all",className:"toggle-all",checked:r,onClick:a}),Object(j.jsx)("label",{htmlFor:"toggle-all",children:Object(j.jsx)("span",{children:"Mark all as complete"})}),Object(j.jsx)("ul",{className:"todo-list",children:t.map((function(e){return Object(j.jsx)(y,{todoId:e.id,title:e.title,completed:e.completed,handlerChecked:n,handlerDeleteTodo:c,handlerEditTodo:o},e.id)}))})]})},k=(n(22),function(e){var t=e.todos,n=e.user,c=e.removeUser,a=Object(u.useState)(t),l=Object(s.a)(a,2),d=l[0],b=l[1],h=Object(u.useState)(d),N=Object(s.a)(h,2),_=N[0],y=N[1],k=Object(u.useState)(""),C=Object(s.a)(k,2),S=C[0],T=C[1];Object(u.useEffect)((function(){b(t),y(d)}),[t,d]);var w=Object(f.c)().pathname,E=_;Object(u.useMemo)((function(){E="/"!==w?_.filter((function(e){return"/completed"===w?e.completed:!e.completed})):_}),[w,S,_]);var I=function(e){return e.isActive?"selected":""};return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("button",{type:"button",onClick:function(){return c()},className:"TodoApp__bnt TodoApp__bnt--delete-user",children:"Delete Account"}),Object(j.jsxs)("section",{className:"todoapp",children:[Object(j.jsxs)("header",{className:"header",children:[Object(j.jsxs)("h1",{children:["todos -"," ",n?n.name:Object(j.jsx)("img",{className:"TodoApp__loader-spiner",src:"../../icons/loader.svg",alt:""})]}),Object(j.jsx)("form",{onSubmit:function(){S&&n&&Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t=S,c=n.id,a=!1,fetch("".concat(O),{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({title:t,userId:c,completed:a})});case 2:T(""),Object(r.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(n.id);case 2:t=e.sent,y(t);case 4:case"end":return e.stop()}}),e)})))();case 4:case"end":return e.stop()}var t,c,a}),e)})))()},children:Object(j.jsx)("input",{type:"text",className:"new-todo",placeholder:"What needs to be done?",value:S,onChange:function(e){T(e.target.value)}})})]}),Object(j.jsx)(A,{visibleTodos:E,handlerChecked:function(e){var t=_.find((function(t){return t.id===e}));t&&(g(e,!t.completed,t.title),t.completed=!t.completed),y((function(e){return Object(p.a)(e)}))},handlerDeleteTodo:function(e){var t=_.findIndex((function(t){return t.id===e}));t>=0&&(v(e),_.splice(t,1),y((function(e){return Object(p.a)(e)})))},handlerAllChecked:function(){var e=_.every((function(e){return e.completed})),t=_.map((function(t){return Object(m.a)(Object(m.a)({},t),{},{completed:!e||!t.completed})}));_.forEach((function(t){return g(t.id,!e||!t.completed,t.title)})),y(t)},handlerEditTodo:function(e,t){var n=d.map((function(n){return n.id===t?{title:e,userId:n.userId,completed:n.completed,id:n.id}:n}));b(n)}}),_.length>0&&Object(j.jsxs)("footer",{className:"footer",children:[Object(j.jsxs)("span",{className:"todo-count",children:[_.filter((function(e){return!1===e.completed})).length," ","items left"]}),Object(j.jsxs)("ul",{className:"filters",children:[Object(j.jsx)("li",{children:Object(j.jsx)(o.b,{to:"/",className:I,end:!0,children:"All"})}),Object(j.jsx)("li",{children:Object(j.jsx)(o.b,{to:"active",className:I,end:!0,children:"Active"})}),Object(j.jsx)("li",{children:Object(j.jsx)(o.b,{to:"completed",className:I,end:!0,children:"Completed"})})]}),Object(j.jsx)("button",{type:"button",className:"clear-completed",onClick:function(){var e=_.filter((function(e){return!1===e.completed}));_.forEach((function(e){e.completed&&v(e.id)})),y(e)},children:"Clear completed"})]})]})]})}),C=function(){var e=Object(u.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],a=Object(u.useState)([]),o=Object(s.a)(a,2),l=o[0],b=o[1],m=Object(u.useState)(),p=Object(s.a)(m,2),f=p[0],x=p[1],g=Object(u.useState)([]),v=Object(s.a)(g,2),N=v[0],_=v[1],y=Object(u.useState)(!1),A=Object(s.a)(y,2),C=A[0],S=A[1],T=localStorage.getItem("test");Object(u.useMemo)((function(){f&&localStorage.setItem("test",f?f.username:"");var e=n.filter((function(e){return e.userId===(null===f||void 0===f?void 0:f.id)}));_(e)}),[f]),Object(u.useEffect)((function(){if(T){var e=l.find((function(e){return e.username===T}));if(x(e),e){var t=n.filter((function(t){return t.userId===(null===e||void 0===e?void 0:e.id)}));_(t)}}}),[l]),Object(u.useEffect)((function(){Object(r.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(O)).then((function(e){return e.json()}));case 3:return t=e.sent,c(t),e.next=7,fetch("".concat(d)).then((function(e){return e.json()}));case 7:n=e.sent,b(n),e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(0),new Error("todos");case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))()}),[]);return Object(j.jsxs)(j.Fragment,{children:[T&&Object(j.jsx)(k,{todos:N,user:f,removeUser:function(){var e;f&&(e=f.id,fetch("".concat(d,"/").concat(e),{method:"DELETE"}),S(!C),localStorage.clear())}}),!T&&Object(j.jsx)(h,{handlerLogin:function(e,t){var n=l.find((function(n){return n.email===e&&n.username===t}));n&&x(n)},waitingNewUser:function(){S(!C)}})]})};n(23),n(24),n(25);a.a.render(Object(j.jsx)(o.a,{children:Object(j.jsx)(C,{})}),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.c3870162.chunk.js.map